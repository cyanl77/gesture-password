手势密码实现思路

js代码分为三个模块：
1、整体页面的初始化。
2、touch事件的响应（呈现和存储数据）。
3、数据存储完毕后的数据处理（设置与验证逻辑）。


下面是每个模块的具体思路

1、整体页面的初始化：
核心部分为画板，这里运用两个宽高相等的canvas分层叠放：

底层画板c1：展示密码锁初始状态及过程中已定的解锁点和轨迹，画板宽度依据窗口大小设定。
            初始呈现未选状态的九个解锁点，依据画板宽度的1/12作为解锁圆的边长，并以此为单位长度设置圆心坐标。
            解锁圆心坐标存储在数组对象points[]中。

顶层画板c2：背景透明，绑定touch事件，展示触摸点轨迹，初始状态为空画板，设为absolute置为顶层。


2、touch事件的响应：
分为touchstart，touchmove，touchend。设置input1对象数组存储正在输入的手势密码。

touchstart事件响应：手指触摸到屏幕时，通过触摸点与圆心差值和半径比较来判断此点是否选中。选中点存入input1。并在底层画板上将选中点画成选中状态。

touchmove事件响应：当input1中没有保存点，不显示轨迹。若有，在c2顶层画板上画出input1里保存的最后一个点和触摸点的连线，并清除移动前的连线（保证页面上只有到当前触摸点的连线）。 当碰到解锁圆，添加至input1，并在底层画板上画出新选中的解锁圆和其与倒数第二个解锁圆的连线。
		
touchend事件：根据input1中有无元素激发模块三，密码的设置和验证。


3、数据处理。
设置input2以存储设置密码时第一次的设置结果。

数据处理逻辑如下：
首先根据input1中内容检测输入是否合法，若不合法（密码太短），提示并初始化重置（不清除input2），退出设置和验证函数。

若合法，根据radio中每个input的checked检测目的，验证或设置。

若为验证：比较localstorage存储密码与input1内容，一致则密码正确，否则提示错误（localstorage为空时提醒设置密码），初始化重置。

若为设置：检测input2是否为空以判断是第几次设置，空为第一次。
          第一次设置：将input1复制给input2，提示在此设置并重置。
	  第二次设置：与input2进行比较看是否一致，一致则设置成功，否则清空全部数据提示重新设置。


编程中还遇到了一个小问题，至今未解决，已经标在程序里，希望有机会向前辈们请教 > <
	


   

